<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Farming Decisions Game</title>
      <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#2E7D32">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="/icon-192.png">


    <link rel="stylesheet" href="css/game.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Enhanced Welcome Screen Styles */
        .welcome-screen-enhanced {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            position: relative;
            overflow: hidden;
        }
        
        .welcome-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
            pointer-events: none;
        }
        
        .welcome-hero {
            position: relative;
            z-index: 1;
            color: white;
            text-align: center;
            padding: 60px 20px;
        }
        
        .hero-icon-large {
            width: 180px;
            height: 180px;
            margin: 0 auto 30px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: heroFloat 4s ease-in-out infinite;
            border: 4px solid rgba(255, 255, 255, 0.3);
        }
        
        @keyframes heroFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }
        
        .hero-icon-large i {
            font-size: 90px;
            background: linear-gradient(135deg, #FFE082, #FFA726);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-hero h1 {
            font-size: clamp(32px, 6vw, 48px);
            font-weight: 800;
            margin-bottom: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }
        
        .welcome-hero .subtitle {
            font-size: clamp(18px, 3vw, 24px);
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 40px;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .feature-cards-enhanced {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px 40px;
            position: relative;
            z-index: 1;
        }
        
        .feature-card-enhanced {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .feature-card-enhanced:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        .feature-icon-circle {
            width: 100px;
            height: 100px;
            margin: 0 auto 25px;
            background: linear-gradient(135deg, #2E7D32, #4CAF50);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(46, 125, 50, 0.3);
            animation: iconPulse 3s ease-in-out infinite;
        }
        
        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }
        
        .feature-icon-circle i {
            font-size: 50px;
            color: white;
        }
        
        .feature-card-enhanced h3 {
            font-size: 24px;
            color: #2E7D32;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .feature-card-enhanced p {
            font-size: 16px;
            color: #555;
            line-height: 1.6;
            margin: 0;
        }
        
        .cta-button-large {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 25px 60px;
            background: linear-gradient(135deg, #FFA726, #FF9800);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255, 152, 0, 0.4);
            margin: 40px auto;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .cta-button-large:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 152, 0, 0.6);
            background: linear-gradient(135deg, #FF9800, #F57C00);
        }
        
        .cta-button-large:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        .cta-button-large i {
            font-size: 28px;
            animation: arrowBounce 1s ease-in-out infinite;
        }
        
        @keyframes arrowBounce {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(8px); }
        }
        
        /* Floating particles effect */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            font-size: 30px;
            opacity: 0.6;
            animation: particleFloat 15s infinite ease-in-out;
        }
        
        @keyframes particleFloat {
            0% { transform: translateY(100vh) translateX(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100px) translateX(100px) rotate(360deg); opacity: 0; }
        }

        /* Weather screen improvements - longer viewing time */
        .weather-container {
            padding: 40px 20px;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #weatherDescription {
            font-size: 18px;
            line-height: 1.8;
            margin: 30px auto;
            max-width: 800px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
        }

        .outcome-cards {
            margin: 40px 0;
        }

        #nextRoundBtn {
            margin-top: 30px;
        }

        /* Warning for final season */
        .final-season-warning {
            animation: pulse 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .warning-banner {
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 22px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
        }

        /* Secondary button style for skip option */
        .btn-secondary {
            background: linear-gradient(135deg, #757575, #616161) !important;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #616161, #424242) !important;
        }


    .demo-page {
        display: none;
    }
    .demo-page.active {
        display: block;
        animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .btn-secondary {
        background: linear-gradient(135deg, #757575, #616161) !important;
    }
    .btn-secondary:hover {
        background: linear-gradient(135deg, #616161, #424242) !important;
    }


    /* Back Button Styling */
.screen-back-btn {
    position: absolute;
    top: 20px;
    left: 20px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid var(--primary);
    color: var(--primary);
    padding: 12px 20px;
    border-radius: 50px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.screen-back-btn:hover {
    background: var(--primary);
    color: white;
    transform: translateX(-5px);
}

.screen-back-btn i {
    font-size: 18px;
}

@media (max-width: 768px) {
    .screen-back-btn {
        top: 10px;
        left: 10px;
        padding: 10px 16px;
        font-size: 14px;
    }
}


/* Checkbox validation error styling */
.form-group .checkbox-group.error {
    border: 2px solid #D32F2F;
    padding: 15px;
    border-radius: 8px;
    background: #FFEBEE;
}

#cropsError {
    animation: shake 0.3s ease;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
}

/* Focus state for validation errors */
input:invalid:focus,
select:invalid:focus {
    border-color: #D32F2F;
    box-shadow: 0 0 0 3px rgba(211, 47, 47, 0.1);
}


/* ===== HORIZONTAL LIKERT SCALE (1-5 in a line) ===== */
.rating-scale {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    margin: 20px 0 10px 0;
    padding: 15px 20px;
    background: linear-gradient(135deg, #f5f5f5, #e8e8e8);
    border-radius: 15px;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
}

.rating-scale label {
    flex: 1;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
    margin: 0;
}

.rating-scale input[type="radio"] {
    display: none; /* Hide default radio button */
}

.rating-scale span {
    display: block;
    width: 50px;
    height: 50px;
    line-height: 50px;
    margin: 0 auto;
    border-radius: 50%;
    background: white;
    color: #666;
    font-weight: 700;
    font-size: 18px;
    transition: all 0.3s ease;
    border: 3px solid #e0e0e0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Hover effect */
.rating-scale label:hover span {
    background: #E8F5E9;
    border-color: var(--primary);
    transform: scale(1.15);
    box-shadow: 0 4px 12px rgba(46, 125, 50, 0.3);
}

/* Selected state */
.rating-scale input[type="radio"]:checked + span {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
    transform: scale(1.15);
    box-shadow: 0 4px 15px rgba(46, 125, 50, 0.5);
}

/* Scale labels (Not at all --- Fully trust) */
.scale-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    padding: 0 10px;
    font-size: 13px;
    color: #666;
    font-weight: 500;
}

.scale-labels span:first-child {
    text-align: left;
}

.scale-labels span:last-child {
    text-align: right;
}

/* Mobile responsive - keep horizontal but smaller */
@media (max-width: 768px) {
    .rating-scale {
        padding: 12px 10px;
        gap: 5px;
    }
    
    .rating-scale span {
        width: 45px;
        height: 45px;
        line-height: 45px;
        font-size: 16px;
    }
    
    .scale-labels {
        font-size: 12px;
        padding: 0 5px;
    }
}

@media (max-width: 480px) {
    .rating-scale span {
        width: 40px;
        height: 40px;
        line-height: 40px;
        font-size: 14px;
    }
}


/* ===== BACK BUTTON ON DEMO PAGES ===== */
.demo-back-btn {
    position: absolute;
    top: 80px;
    left: 20px;
    background: rgba(255, 255, 255, 0.95);
    border: 2px solid #757575;
    color: #424242;
    padding: 10px 18px;
    border-radius: 50px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.demo-back-btn:hover {
    background: #757575;
    color: white;
    transform: translateX(-5px);
}

.demo-back-btn i {
    font-size: 16px;
}

@media (max-width: 768px) {
    .demo-back-btn {
        top: 70px;
        left: 10px;
        padding: 8px 14px;
        font-size: 13px;
    }
}




    </style>
</head>
<body>
    <!-- Language Toggle -->
    <div class="language-toggle">
        <button id="languageBtn" class="lang-btn">
            <i class="fas fa-language"></i>
            <span id="currentLang">English</span>
        </button>
    </div>



    <!-- üÜï ADD THIS SECTION HERE -->
<!-- Connection Status & Sync Controls -->
<div class="connection-controls">
    <div id="connectionStatus" class="connection-status">
        <i class="fas fa-circle"></i>
        <span id="statusText">Checking...</span>
    </div>
    <button id="syncButton" class="sync-btn" onclick="manualSync()" style="display: none;">
        <i class="fas fa-sync-alt"></i>
        <span id="syncButtonText">Sync Now</span>
    </button>
    <button id="exportButton" class="export-btn" onclick="window.offlineStorage.exportOfflineData()" style="display: none;">
        <i class="fas fa-download"></i>
        <span>Backup Data</span>
    </button>
</div>



    <!-- Main Container -->
    <div id="app" class="app-container">
        
        <!-- Enhanced Welcome Screen -->
        <div id="welcomeScreen" class="screen active welcome-screen-enhanced">
            <div class="welcome-overlay"></div>
            <div class="particles" id="particles"></div>
            
            <div class="welcome-hero">
                <div class="hero-icon-large">
                    <i class="fas fa-seedling"></i>
                </div>
                <h1 data-translate="welcome.title">Farming Decisions Game</h1>
                <p class="subtitle" data-translate="welcome.subtitle">
                    Make important decisions for your farm and family across 4 seasons
                </p>
            </div>
            
            <div class="feature-cards-enhanced">
                <div class="feature-card-enhanced">
                    <div class="feature-icon-circle">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h3 data-translate="welcome.seasons">4 Farming Seasons</h3>
                    <p data-translate="welcome.seasonsDesc">Experience different challenges and make strategic choices each season</p>
                </div>
                
                <div class="feature-card-enhanced">
                    <div class="feature-icon-circle">
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <h3 data-translate="welcome.decisions">Real Trade-offs</h3>
                    <p data-translate="welcome.decisionsDesc">Balance farm investments, education, and household needs with limited resources</p>
                </div>
                
                <div class="feature-card-enhanced">
                    <div class="feature-icon-circle">
                        <i class="fas fa-cloud-sun-rain"></i>
                    </div>
                    <h3 data-translate="welcome.weather">Weather Challenges</h3>
                    <p data-translate="welcome.weatherDesc">Face unpredictable weather that affects your harvest and livelihood</p>
                </div>
            </div>
            
            <button class="cta-button-large" id="startBtn">
                <span data-translate="welcome.startBtn">Begin Your Journey</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <!-- Demographics Screen -->
        <!-- Demographics Screen - EXTENDED VERSION -->
<!-- Demographics Screen - MULTI-STEP VERSION -->
<!-- Demographics Screen - 10-STEP VERSION (SHORTER PAGES) -->
<div id="demographicsScreen" class="screen">
    <div class="form-container" style="max-width: 800px;">

         <!-- ‚úÖ BACK TO PREVIOUS PAGE BUTTON (only shows after page 1) -->
        <button class="demo-back-btn" onclick="goBackOnePage()" id="demoTopBackBtn" style="display: none;">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
        </button>
        


        <div class="progress-header">
    <div class="progress-bar">
        <div class="progress-fill" id="demoProgressBar" style="width: 7.7%"></div>
    </div>
    <span class="progress-text" id="demoProgressText">Step 1 of 13</span>
</div>


        <h2 data-translate="demographics.title">Tell Us About Yourself</h2>
        
        <form id="demographicsForm" class="game-form">
            
            <!-- PAGE 1: Basic Info (5 fields) -->
            <div class="demo-page active" id="demoPage1">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-user-circle"></i> Basic Information
                </h3>
                
                <div class="form-group">
                    <label><i class="fas fa-user-tie"></i> Enumerator Name <span style="color: red;">*</span></label>
                    <select id="enumeratorName" name="enumeratorName" required>
                        <option value="">Select Enumerator...</option>
                        <option value="Latifatu Abdul Salam">Latifatu Abdul Salam</option>
                        <option value="Salifu Nantogma">Salifu Nantogma</option>
                        <option value="Mohammed Abdul-Jalil">Mohammed Abdul-Jalil</option>
                        <option value="Osman Abdul Razak">Osman Abdul Razak</option>
                        <option value="Issah Abdul Rahaman">Issah Abdul Rahaman</option>
                        <option value="Luckuman Abukari">Luckuman Abukari</option>
                        <option value="Musah Abdulai">Musah Abdulai</option>
                        <option value="Abdulai Mariam">Abdulai Mariam</option>
                        <option value="Alhassan Baako Fuseini">Alhassan Baako Fuseini</option>
                        <option value="Mohammed Shahadu">Mohammed Shahadu</option>
                    </select>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-map-marker-alt"></i> Community Name <span style="color: red;">*</span></label>
                    <select id="communityName" name="communityName" required>
                        <option value="">Loading communities...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Gender <span style="color: red;">*</span></label>
                    <select name="gender" required>
                        <option value="">Select...</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Role in Household <span style="color: red;">*</span></label>
                    <select name="role" id="role" required>
                        <option value="">Select...</option>
                        <option value="husband">Husband</option>
                        <option value="wife">Wife</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Age (years) <span style="color: red;">*</span></label>
                    <input type="number" name="age" required min="18" max="100">
                </div>
            </div>

            <!-- PAGE 2: Education & Household (3 fields) -->
            <div class="demo-page" id="demoPage2">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-graduation-cap"></i> Education & Household
                </h3>
                
                <div class="form-group">
                    <label>Highest Education Level <span style="color: red;">*</span></label>
                    <select name="education" required>
                        <option value="">Select...</option>
                        <option value="0">No schooling</option>
                        <option value="1">Primary</option>
                        <option value="2">Junior High School (JHS)</option>
                        <option value="3">Senior High School (SHS)</option>
                        <option value="4">Tertiary/Technical</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Household size (all members) <span style="color: red;">*</span></label>
                    <input type="number" name="householdSize" required min="1" max="50">
                </div>

                <div class="form-group">
                    <label>Number of children under 15 <span style="color: red;">*</span></label>
                    <input type="number" name="childrenUnder15" required min="0" max="30">
                </div>
            </div>

            <!-- PAGE 3: Household Assets (8 checkboxes) -->
            <div class="demo-page" id="demoPage3">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-home"></i> Household Assets
                </h3>
                
                <div class="form-group">
                    <label>What assets does your household own? (Select all that apply)</label>
                    <div class="checkbox-group" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_radio" value="1"> 
                            <i class="fas fa-broadcast-tower"></i> Radio
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_tv" value="1"> 
                            <i class="fas fa-tv"></i> TV
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_refrigerator" value="1"> 
                            <i class="fas fa-snowflake"></i> Refrigerator
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_bicycle" value="1"> 
                            <i class="fas fa-bicycle"></i> Bicycle
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_motorbike" value="1"> 
                            <i class="fas fa-motorcycle"></i> Motorbike
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_mobilePhone" value="1"> 
                            <i class="fas fa-mobile-alt"></i> Mobile phone
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_generator" value="1"> 
                            <i class="fas fa-plug"></i> Generator
                        </label>
                        <label style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="asset_plough" value="1"> 
                            <i class="fas fa-tractor"></i> Plough
                        </label>
                    </div>
                </div>
            </div>

            <!-- PAGE 4: Farming Experience (3 fields) -->
            <div class="demo-page" id="demoPage4">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-seedling"></i> Farming Experience
                </h3>
                
                <div class="form-group">
                    <label>Years of Farming Experience <span style="color: red;">*</span></label>
                    <input type="number" name="farmingYears" required min="0" max="80">
                </div>

                <div class="form-group">
                    <label>Land Cultivated (acres) <span style="color: red;">*</span></label>
                    <input type="number" name="landSize" required min="0" step="0.1">
                </div>

                <div class="form-group">
                    <label>How do you access your farmland? <span style="color: red;">*</span></label>
                    <select name="landAccessMethod" required>
                        <option value="">Select...</option>
                        <option value="1">Own land</option>
                        <option value="2">Rent/Lease</option>
                        <option value="3">Borrowed/Family land</option>
                        <option value="4">Sharecropping</option>
                        <option value="5">Other</option>
                    </select>
                </div>
            </div>





            <!-- PAGE 5: Crops & Income (4 fields) -->
           <!-- PAGE 5: Crops & Income (4 fields) -->
<div class="demo-page" id="demoPage5">
    <h3 style="color: #2E7D32; margin-bottom: 20px;">
        <i class="fas fa-leaf"></i> Crops & Income
    </h3>
    
    <div class="form-group">
        <label>Main Crops (select all that apply) <span style="color: red;">*</span></label>
        <div class="checkbox-group" id="cropsCheckboxGroup" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
            <label><input type="checkbox" name="crops" value="maize"> üåΩ Maize</label>
            <label><input type="checkbox" name="crops" value="rice"> üçö Rice</label>
            <label><input type="checkbox" name="crops" value="soybeans"> ü´ò Soybeans</label>
            <label><input type="checkbox" name="crops" value="groundnuts"> ü•ú Groundnuts</label>
            <label><input type="checkbox" name="crops" value="other"> ‚ûï Other</label>
        </div>
        <div id="cropsError" style="display: none; color: #D32F2F; margin-top: 8px; font-size: 14px; font-weight: 600;">
            ‚ö†Ô∏è Please select at least one crop
        </div>
    </div>

    <div class="form-group">
        <label>How many different crops did you plant last season? <span style="color: red;">*</span></label>
        <input type="number" name="numberOfCropsPlanted" required min="1" max="10">
    </div>

    <div class="form-group">
        <label>Last Season Income (GHS) <span style="color: red;">*</span></label>
        <input type="number" name="lastIncome" required min="0">
    </div>

    <div class="form-group">
        <label>Farming inputs expenditure last season (GHS) <span style="color: red;">*</span></label>
        <input type="number" name="farmingInputExpenditure" required min="0">
    </div>
</div>



            <!-- PAGE 6: Livestock (4 fields) -->
            <div class="demo-page" id="demoPage6">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-cow"></i> Livestock
                </h3>
                
                <div class="form-group">
                    <label>How many livestock does your household own?</label>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <label style="font-size: 16px; font-weight: 600; display: block; margin-bottom: 10px;">
                                üêÑ Cattle:
                            </label>
                            <input type="number" name="livestock_cattle" min="0" value="0" style="width: 100%;">
                        </div>
                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <label style="font-size: 16px; font-weight: 600; display: block; margin-bottom: 10px;">
                                üêê Goats:
                            </label>
                            <input type="number" name="livestock_goats" min="0" value="0" style="width: 100%;">
                        </div>
                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <label style="font-size: 16px; font-weight: 600; display: block; margin-bottom: 10px;">
                                üêë Sheep:
                            </label>
                            <input type="number" name="livestock_sheep" min="0" value="0" style="width: 100%;">
                        </div>
                        <div style="background: #f5f5f5; padding: 20px; border-radius: 10px;">
                            <label style="font-size: 16px; font-weight: 600; display: block; margin-bottom: 10px;">
                                üêî Poultry:
                            </label>
                            <input type="number" name="livestock_poultry" min="0" value="0" style="width: 100%;">
                        </div>
                    </div>
                </div>
            </div>

            <!-- PAGE 7: Farm Inputs & Technology (4 fields) -->
            <div class="demo-page" id="demoPage7">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-tools"></i> Farm Inputs & Technology
                </h3>
                
                <div class="form-group">
                    <label>Which improved inputs did you use last season? (Select all)</label>
                    <div class="checkbox-group" style="display: grid; gap: 10px;">
                        <label style="padding: 12px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="input_certifiedSeed" value="1"> 
                            üå± Certified/Improved seed
                        </label>
                        <label style="padding: 12px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="input_fertilizer" value="1"> 
                            üß™ Chemical fertilizer
                        </label>
                        <label style="padding: 12px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="input_pesticides" value="1"> 
                            üêõ Pesticides/Herbicides
                        </label>
                        <label style="padding: 12px; background: #f5f5f5; border-radius: 8px;">
                            <input type="checkbox" name="input_irrigation" value="1"> 
                            üíß Irrigation
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Do you have access to irrigation? <span style="color: red;">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="hasIrrigationAccess" value="0" required> No</label>
                        <label><input type="radio" name="hasIrrigationAccess" value="1"> Yes</label>
                    </div>
                </div>
            </div>

            <!-- PAGE 8: Shocks & Losses (4 fields) -->
            <div class="demo-page" id="demoPage8">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-exclamation-triangle"></i> Shocks & Losses
                </h3>
                
                <div class="form-group">
                    <label>What shocks have you experienced in the past 3 years? (Select all)</label>
                    <div class="checkbox-group" style="display: grid; gap: 10px;">
                        <label style="padding: 12px; background: #fff3cd; border-radius: 8px;">
                            <input type="checkbox" name="shock_drought" value="1"> 
                            üåµ Drought
                        </label>
                        <label style="padding: 12px; background: #cfe2ff; border-radius: 8px;">
                            <input type="checkbox" name="shock_flood" value="1"> 
                            üåä Flood
                        </label>
                        <label style="padding: 12px; background: #d1e7dd; border-radius: 8px;">
                            <input type="checkbox" name="shock_pestsDisease" value="1"> 
                            üêõ Pests/Disease
                        </label>
                        <label style="padding: 12px; background: #f8d7da; border-radius: 8px;">
                            <input type="checkbox" name="shock_cropPriceFall" value="1"> 
                            üìâ Crop price fall
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Estimated total loss from shocks last year (GHS)</label>
                    <input type="number" name="estimatedLossLastYear" min="0" value="0">
                </div>

                <div class="form-group">
                    <label>Harvest loss percentage last season (0-100%) <span style="color: red;">*</span></label>
                    <input type="number" name="harvestLossPercentage" required min="0" max="100" value="0">
                </div>
            </div>

            <!-- PAGE 9: Savings & Credit (5 fields) -->
            <div class="demo-page" id="demoPage9">
                <h3 style="color: #2E7D32; margin-bottom: 20px;">
                    <i class="fas fa-piggy-bank"></i> Savings & Credit
                </h3>
                
                <div class="form-group">
                    <label>Do you currently have any savings? <span style="color: red;">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="hasSavings" value="0" required> No</label>
                        <label><input type="radio" name="hasSavings" value="1"> Yes</label>
                    </div>
                </div>

                <div class="form-group" id="savingsAmountGroup" style="display: none;">
                    <label>Estimated savings amount (GHS)</label>
                    <input type="number" name="savingsAmount" min="0">
                </div>

                <div class="form-group">
                    <label>Did you borrow money in past 12 months? <span style="color: red;">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="borrowedMoney" value="0" required> No</label>
                        <label><input type="radio" name="borrowedMoney" value="1"> Yes</label>
                    </div>
                </div>

                <div class="form-group" id="borrowingSourcesGroup" style="display: none;">
                    <label>Where did you borrow from? (Select all):</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="borrowSource_bank"> üè¶ Bank</label>
                        <label><input type="checkbox" name="borrowSource_microfinance"> üíº Microfinance</label>
                        <label><input type="checkbox" name="borrowSource_vsla"> üë• VSLA/Savings group</label>
                        <label><input type="checkbox" name="borrowSource_familyFriends"> üë™ Family/Friends</label>
                        <label><input type="checkbox" name="borrowSource_moneylender"> üí∞ Moneylender</label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Any off-farm income last season? <span style="color: red;">*</span></label>
                    <div class="radio-group">
                        <label><input type="radio" name="hasOffFarmIncome" value="0" required> No</label>
                        <label><input type="radio" name="hasOffFarmIncome" value="1"> Yes</label>
                    </div>
                </div>

                <div class="form-group" id="offFarmIncomeGroup" style="display: none;">
                    <label>Off-farm income amount (GHS)</label>
                    <input type="number" name="offFarmIncomeAmount" min="0">
                </div>
            </div>

            <!-- PAGE 10: Insurance & Trust (5 fields) -->
            <!-- PAGE 10: Insurance & Trust (7 fields) -->
<div class="demo-page" id="demoPage10">
    <h3 style="color: #2E7D32; margin-bottom: 20px;">
        <i class="fas fa-shield-alt"></i> Insurance & Trust
    </h3>
    
    <div class="form-group">
        <label>Have you heard about weather index insurance before? <span style="color: red;">*</span></label>
        <div class="radio-group">
            <label><input type="radio" name="priorKnowledge" value="1" required> Yes</label>
            <label><input type="radio" name="priorKnowledge" value="0"> No</label>
        </div>
    </div>

    <div class="form-group">
        <label>Have you purchased any type of insurance before? <span style="color: red;">*</span></label>
        <div class="radio-group">
            <label><input type="radio" name="purchasedInsuranceBefore" value="0" required> No</label>
            <label><input type="radio" name="purchasedInsuranceBefore" value="1"> Yes</label>
        </div>
    </div>

   <div class="form-group">
    <label>How much do you trust insurance providers? (1 = Not at all, 5 = Fully) <span style="color: red;">*</span></label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="trust_insuranceProvider" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="trust_insuranceProvider" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="trust_insuranceProvider" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="trust_insuranceProvider" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="trust_insuranceProvider" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Fully trust</span>
    </div>
</div>

<div class="form-group">
    <label>How much do you trust farmer groups/cooperatives? (1-5) <span style="color: red;">*</span></label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="trust_farmerGroup" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="trust_farmerGroup" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="trust_farmerGroup" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="trust_farmerGroup" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="trust_farmerGroup" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Fully trust</span>
    </div>
</div>

<div class="form-group">
    <label>How much do you trust NGOs? (1-5) <span style="color: red;">*</span></label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="trust_ngo" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="trust_ngo" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="trust_ngo" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="trust_ngo" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="trust_ngo" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Fully trust</span>
    </div>
</div>


    <!-- ‚úÖ ADD THIS QUESTION -->
 <!-- ‚úÖ QUESTION: Rainfall Change Perception -->
<div class="form-group">
    <label>Do you think rainfall patterns have changed in recent years? (1 = Not at all, 5 = Very much) <span style="color: red;">*</span></label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="rainfallChangePerception" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="rainfallChangePerception" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="rainfallChangePerception" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="rainfallChangePerception" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="rainfallChangePerception" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Very much</span>
    </div>
</div>

<!-- ‚úÖ QUESTION: Insurer Payout Trust -->
<div class="form-group">
    <label>How much do you trust that insurance companies will pay out when needed? (1 = Not at all, 5 = Fully) <span style="color: red;">*</span></label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="insurerPayoutTrust" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="insurerPayoutTrust" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="insurerPayoutTrust" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="insurerPayoutTrust" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="insurerPayoutTrust" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Fully trust</span>
    </div>
</div>



    <div class="form-group">
        <label>Distance to nearest market (minutes walking) <span style="color: red;">*</span></label>
        <input type="number" name="distanceToMarket" required min="0">
    </div>

    <div class="form-group">
        <label>Distance to nearest insurance provider (km) <span style="color: red;">*</span></label>
        <input type="number" name="distanceToInsurer" required min="0" step="0.1">
    </div>

    <div class="form-group">
        <label>Do you use mobile money (MoMo)? <span style="color: red;">*</span></label>
        <div class="radio-group">
            <label><input type="radio" name="usesMobileMoney" value="0" required> No</label>
            <label><input type="radio" name="usesMobileMoney" value="1"> Yes</label>
        </div>
    </div>

    <div class="form-group">
        <label>Are you a member of any farmer group? <span style="color: red;">*</span></label>
        <div class="radio-group">
            <label><input type="radio" name="memberOfFarmerGroup" value="0" required> No</label>
            <label><input type="radio" name="memberOfFarmerGroup" value="1"> Yes</label>
        </div>
    </div>
</div>



            <!-- Navigation Buttons -->
            <div class="demo-nav-buttons" style="display: flex; justify-content: space-between; margin-top: 30px; gap: 15px;">
                <button type="button" id="demoPrevBtn" class="btn-secondary btn-large" style="flex: 1; display: none;">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back</span>
                </button>
                <button type="button" id="demoNextBtn" class="btn-primary btn-large" style="flex: 2;">
                    <span>Continue</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
                <button type="submit" id="demoSubmitBtn" class="btn-primary btn-large" style="flex: 2; display: none;">
                    <span>Continue to Risk Assessment</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </form>
    </div>
</div>





            <!-- <button type="submit" class="btn-primary btn-large">
                <span data-translate="common.continue">Continue</span>
                <i class="fas fa-arrow-right"></i>
            </button> -->
        </form>
    </div>
</div>



        <!-- Risk Assessment Screen -->
       <div id="riskScreen" class="screen">
    <div class="form-container">
        <button class="screen-back-btn" onclick="goBackToDemographics()">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
        </button>

  <div class="progress-header">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 84.6%"></div>
    </div>
    <span class="progress-text">Step 11 of 13</span>
</div>

                <h2 data-translate="risk.title">Understanding Your Risk Preferences</h2>
                
                <form id="riskForm" class="game-form">
                    <div class="form-group">
                        <label data-translate="risk.scenario">
                            If you had to choose between these two options:
                        </label>
                        <div class="option-cards">
                            <label class="option-card">
                                <input type="radio" name="riskChoice" value="1" required>
                                <div class="option-content">
                                    <i class="fas fa-hand-holding-usd"></i>
                                    <h4>Guaranteed 200 GHS</h4>
                                    <p>You receive 200 GHS for sure</p>
                                </div>
                            </label>
                            <label class="option-card">
                                <input type="radio" name="riskChoice" value="2">
                                <div class="option-content">
                                    <i class="fas fa-dice"></i>
                                    <h4>Take a Chance</h4>
                                    <p>50% chance of 450 GHS or nothing</p>
                                </div>
                            </label>
                        </div>
                    </div>


<div class="form-group">
    <label data-translate="risk.comfort">
        How comfortable are you with financial risks?
    </label>
    <div class="rating-scale">
        <label>
            <input type="radio" name="riskComfort" value="1" required>
            <span>1</span>
        </label>
        <label>
            <input type="radio" name="riskComfort" value="2">
            <span>2</span>
        </label>
        <label>
            <input type="radio" name="riskComfort" value="3">
            <span>3</span>
        </label>
        <label>
            <input type="radio" name="riskComfort" value="4">
            <span>4</span>
        </label>
        <label>
            <input type="radio" name="riskComfort" value="5">
            <span>5</span>
        </label>
    </div>
    <div class="scale-labels">
        <span>Not at all</span>
        <span>Very comfortable</span>
    </div>
</div>

                    <div class="form-group">
                        <label data-translate="risk.decisionMaker">
                            Who usually makes major farm investment decisions?
                        </label>
                        <select id="decisionMaker" name="decisionMaker" required>
                            <option value="">Select...</option>
                            <option value="1">Mainly husband</option>
                            <option value="2">Mainly wife</option>
                            <option value="3">Joint decisions</option>
                            <option value="4">Another household member</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-primary btn-large">
                        <span data-translate="common.continue">Continue</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Empowerment Assessment -->
      <div id="empowermentScreen" class="screen">
    <div class="form-container">
        <button class="screen-back-btn" onclick="goBackToRisk()">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
        </button>

               <div class="progress-header">
    <div class="progress-bar">
        <div class="progress-fill" style="width: 92.3%"></div>
    </div>
    <span class="progress-text">Step 12 of 13</span>
</div>

                <h2 data-translate="empowerment.title">Decision Making in Your Household</h2>
                <p class="subtitle" data-translate="empowerment.subtitle">
                    Please indicate your level of agreement with each statement
                </p>
                
                <form id="empowermentForm" class="game-form">
                    <div class="empowerment-questions">
                        <div class="question-item">
                            <p data-translate="empowerment.q1">I have a say in decisions about which crops to plant</p>
                            <div class="likert-scale">
                                <label><input type="radio" name="q1" value="1" required><span>1</span></label>
                                <label><input type="radio" name="q1" value="2"><span>2</span></label>
                                <label><input type="radio" name="q1" value="3"><span>3</span></label>
                                <label><input type="radio" name="q1" value="4"><span>4</span></label>
                                <label><input type="radio" name="q1" value="5"><span>5</span></label>
                            </div>
                            <div class="scale-labels">
                                <span>Strongly Disagree</span>
                                <span>Strongly Agree</span>
                            </div>
                        </div>

                        <div class="question-item">
                            <p data-translate="empowerment.q2">I help decide how money earned from farming is used</p>
                            <div class="likert-scale">
                                <label><input type="radio" name="q2" value="1" required><span>1</span></label>
                                <label><input type="radio" name="q2" value="2"><span>2</span></label>
                                <label><input type="radio" name="q2" value="3"><span>3</span></label>
                                <label><input type="radio" name="q2" value="4"><span>4</span></label>
                                <label><input type="radio" name="q2" value="5"><span>5</span></label>
                            </div>
                            <div class="scale-labels">
                                <span>Strongly Disagree</span>
                                <span>Strongly Agree</span>
                            </div>
                        </div>

                        <div class="question-item">
                            <p data-translate="empowerment.q3">I can decide whether we buy inputs each season</p>
                            <div class="likert-scale">
                                <label><input type="radio" name="q3" value="1" required><span>1</span></label>
                                <label><input type="radio" name="q3" value="2"><span>2</span></label>
                                <label><input type="radio" name="q3" value="3"><span>3</span></label>
                                <label><input type="radio" name="q3" value="4"><span>4</span></label>
                                <label><input type="radio" name="q3" value="5"><span>5</span></label>
                            </div>
                            <div class="scale-labels">
                                <span>Strongly Disagree</span>
                                <span>Strongly Agree</span>
                            </div>
                        </div>

                        <div class="question-item">
                            <p data-translate="empowerment.q4">My opinion is considered in financial matters</p>
                            <div class="likert-scale">
                                <label><input type="radio" name="q4" value="1" required><span>1</span></label>
                                <label><input type="radio" name="q4" value="2"><span>2</span></label>
                                <label><input type="radio" name="q4" value="3"><span>3</span></label>
                                <label><input type="radio" name="q4" value="4"><span>4</span></label>
                                <label><input type="radio" name="q4" value="5"><span>5</span></label>
                            </div>
                            <div class="scale-labels">
                                <span>Strongly Disagree</span>
                                <span>Strongly Agree</span>
                            </div>
                        </div>

                        <div class="question-item">
                            <p data-translate="empowerment.q5">I feel confident expressing my preferences</p>
                            <div class="likert-scale">
                                <label><input type="radio" name="q5" value="1" required><span>1</span></label>
                                <label><input type="radio" name="q5" value="2"><span>2</span></label>
                                <label><input type="radio" name="q5" value="3"><span>3</span></label>
                                <label><input type="radio" name="q5" value="4"><span>4</span></label>
                                <label><input type="radio" name="q5" value="5"><span>5</span></label>
                            </div>
                            <div class="scale-labels">
                                <span>Strongly Disagree</span>
                                <span>Strongly Agree</span>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary btn-large">
                        <span data-translate="common.continue">Continue</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Enhanced Interactive Tutorial Screen -->
     <div id="tutorialScreen" class="screen">
    <div class="tutorial-container-enhanced">
        <button class="screen-back-btn" onclick="goBackToEmpowerment()">
            <i class="fas fa-arrow-left"></i>
            <span>Back</span>
        </button>
        
                
                <!-- Skip Button -->
                <button class="skip-tutorial-btn" onclick="skipTutorial()">
                    Skip Tutorial ‚Üí
                </button>
                
                <!-- Treatment Badge -->
                <div class="treatment-badge" id="treatmentBadge">
                    <!-- Populated by JavaScript -->
                </div>
                
                <!-- Card Stack Container -->
                <div class="card-stack-wrapper">
                    <div id="tutorialCardStack" class="tutorial-card-stack">
                        <!-- Cards generated by JavaScript -->
                    </div>
                </div>
                
                <!-- Navigation Controls -->
                <div class="tutorial-nav-controls">
                    <button class="tutorial-nav-btn" id="tutorialPrevBtn" onclick="previousTutorialCard()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="tutorial-progress">
                        <div class="progress-dots" id="progressDots">
                            <!-- Generated by JavaScript -->
                        </div>
                        <div class="progress-text" id="tutorialProgress">
                            1 / 10
                        </div>
                    </div>
                    
                    <button class="tutorial-nav-btn" id="tutorialNextBtn" onclick="nextTutorialCard()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <!-- Finish Button -->
                <button class="tutorial-finish-btn" id="tutorialFinishBtn" onclick="startGameAfterTutorial()">
                    <i class="fas fa-play"></i>
                    <span>Start Playing!</span>
                </button>
                
                <!-- Help Text -->
                <div class="tutorial-help">
                    <p>üí° Tip: Click side cards or use arrow keys (‚Üê ‚Üí) to navigate</p>
                </div>
            </div>
        </div>

        <!-- Game Season Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-container">
                <!-- Season Header -->
                <div class="round-header">
                    <div class="round-info">
                        <h3><span data-translate="game.season">Season</span> <span id="currentRound">1</span>/<span id="totalRoundsDisplay">4</span></h3>
                        <p id="roundContext">Individual Play</p>
                    </div>
                    <div class="budget-display">
                        <label data-translate="game.budget">Your Budget</label>
                        <div class="budget-amount">
                            <span id="totalBudget">500</span> <small>GHS</small>
                        </div>
                    </div>
                </div>

                <!-- Story Panel -->
                <div class="story-panel">
                    <div class="story-content">
                        <i class="fas fa-book-open"></i>
                        <p id="storyText"></p>
                    </div>
                </div>

                <!-- Allocation Interface -->
                <div class="allocation-container">
                    <h3 data-translate="game.allocateTitle">How will you spend your money?</h3>
                    
                    <form id="allocationForm">
                        <!-- Allocation items will be inserted here by JavaScript in random order -->

                        <!-- Summary -->
                        <div class="allocation-summary">
                            <div class="summary-row">
                                <span data-translate="game.total">Total Spent:</span>
                                <span id="totalSpent" class="amount">0 GHS</span>
                            </div>
                            <div class="summary-row">
                                <span data-translate="game.remaining">Remaining:</span>
                                <span id="remaining" class="amount">500 GHS</span>
                            </div>
                        </div>

                        <button type="submit" class="btn-primary btn-large" id="submitAllocation">
                            <span data-translate="game.submitBtn">Submit Allocation</span>
                            <i class="fas fa-check"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Weather Event Screen -->
        <div id="weatherScreen" class="screen">
            <div class="weather-container">
                <div class="weather-animation" id="weatherAnimation"></div>
                <h2 id="weatherTitle"></h2>
                <p id="weatherDescription"></p>
                
                <div class="outcome-cards">
                    <div class="outcome-card">
                        <i class="fas fa-seedling"></i>
                        <h4 data-translate="outcome.harvest">Harvest Outcome</h4>
                        <div class="outcome-value" id="harvestValue"></div>
                    </div>
                    <div class="outcome-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4 data-translate="outcome.insurance">Insurance Payout</h4>
                        <div class="outcome-value" id="payoutValue"></div>
                    </div>
                    <div class="outcome-card">
                        <i class="fas fa-coins"></i>
                        <h4 data-translate="outcome.finalIncome">Final Income</h4>
                        <div class="outcome-value highlight" id="finalIncomeValue"></div>
                    </div>
                </div>

                <button class="btn-primary btn-large" id="nextRoundBtn">
                    <span data-translate="outcome.continue">Continue to Next Season</span>
                    <i class="fas fa-arrow-right"></i>
                </button>

                <div style="text-align: center; margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                    <p style="font-size: 16px; color: white; margin: 0;">
                        ‚ÑπÔ∏è <strong>Take your time to review the results before continuing</strong>
                    </p>
                </div>
            </div>
        </div>

        <!-- Knowledge Test Screen -->
        <div id="knowledgeScreen" class="screen">
            <div class="form-container">
                <h2 data-translate="knowledge.title">Test Your Understanding</h2>
                <p class="subtitle" data-translate="knowledge.subtitle">Answer these questions about weather index insurance</p>
                
                <form id="knowledgeForm" class="game-form">
                    <div class="question-block">
                        <p class="question-text">
                            1. Weather index insurance pays out based on rainfall conditions, not on whether my own farm was damaged.
                        </p>
                        <div class="radio-group">
                            <label><input type="radio" name="q1" value="true" required> True</label>
                            <label><input type="radio" name="q1" value="false"> False</label>
                        </div>
                    </div>

                    <div class="question-block">
                        <p class="question-text">
                            2. If there is a drought according to the index, all insured farmers in the area receive payouts.
                        </p>
                        <div class="radio-group">
                            <label><input type="radio" name="q2" value="true" required> True</label>
                            <label><input type="radio" name="q2" value="false"> False</label>
                        </div>
                    </div>

                    <div class="question-block">
                        <p class="question-text">
                            3. Insurance guarantees that I will earn more profit every season.
                        </p>
                        <div class="radio-group">
                            <label><input type="radio" name="q3" value="true" required> True</label>
                            <label><input type="radio" name="q3" value="false"> False</label>
                        </div>
                    </div>

                    <div class="question-block">
                        <p class="question-text">
                            4. The cost of insurance is paid before the farming season begins.
                        </p>
                        <div class="radio-group">
                            <label><input type="radio" name="q4" value="true" required> True</label>
                            <label><input type="radio" name="q4" value="false"> False</label>
                        </div>
                    </div>

                    <div class="question-block">
                        <p class="question-text">
                            5. It is possible to receive no payout even if my harvest is poor, if rainfall conditions were normal.
                        </p>
                        <div class="radio-group">
                            <label><input type="radio" name="q5" value="true" required> True</label>
                            <label><input type="radio" name="q5" value="false"> False</label>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary btn-large">
                        <span data-translate="knowledge.submit">Submit Answers</span>
                        <i class="fas fa-check"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Perception Assessment Screen (After Couple Session) -->
        <div id="perceptionScreen" class="screen">
            <div class="form-container" style="max-width: 800px;">
                <div class="progress-header">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%; background: linear-gradient(90deg, var(--ghana-red), var(--ghana-yellow), var(--ghana-green));"></div>
                    </div>
                    <span class="progress-text">Final Assessment</span>
                </div>

                <h2 style="text-align: center; color: var(--primary);">
                    <i class="fas fa-comments"></i> Your Experience with the Bundle
                </h2>
                <p class="subtitle" style="text-align: center;">
                    Share your thoughts about the insurance and farming bundle you experienced
                </p>
                
                <form id="perceptionForm" class="game-form">
                    <div class="question-item">
                        <p><strong>1. How much did the bundle (insurance + inputs) influence your farming decisions?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="bundleInfluence" value="1" required><span>1</span></label>
                            <label><input type="radio" name="bundleInfluence" value="2"><span>2</span></label>
                            <label><input type="radio" name="bundleInfluence" value="3"><span>3</span></label>
                            <label><input type="radio" name="bundleInfluence" value="4"><span>4</span></label>
                            <label><input type="radio" name="bundleInfluence" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Not at all</span>
                            <span>Very much</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>2. How well do you understand how weather index insurance works?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="insuranceUnderstanding" value="1" required><span>1</span></label>
                            <label><input type="radio" name="insuranceUnderstanding" value="2"><span>2</span></label>
                            <label><input type="radio" name="insuranceUnderstanding" value="3"><span>3</span></label>
                            <label><input type="radio" name="insuranceUnderstanding" value="4"><span>4</span></label>
                            <label><input type="radio" name="insuranceUnderstanding" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Don't understand at all</span>
                            <span>Understand completely</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>3. Would you be willing to pay for this bundle in real life?</strong></p>
                        <div class="radio-group">
                            <label><input type="radio" name="willingnessToPay" value="yes" required> Yes</label>
                            <label><input type="radio" name="willingnessToPay" value="no"> No</label>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>4. How likely are you to recommend this bundle to other farmers?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="recommendToOthers" value="1" required><span>1</span></label>
                            <label><input type="radio" name="recommendToOthers" value="2"><span>2</span></label>
                            <label><input type="radio" name="recommendToOthers" value="3"><span>3</span></label>
                            <label><input type="radio" name="recommendToOthers" value="4"><span>4</span></label>
                            <label><input type="radio" name="recommendToOthers" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Very unlikely</span>
                            <span>Very likely</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>5. Do you think the insurance payouts were fair?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="perceivedFairness" value="1" required><span>1</span></label>
                            <label><input type="radio" name="perceivedFairness" value="2"><span>2</span></label>
                            <label><input type="radio" name="perceivedFairness" value="3"><span>3</span></label>
                            <label><input type="radio" name="perceivedFairness" value="4"><span>4</span></label>
                            <label><input type="radio" name="perceivedFairness" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Very unfair</span>
                            <span>Very fair</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>6. How much do you trust that insurance companies would pay out in real life?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="trustInPayout" value="1" required><span>1</span></label>
                            <label><input type="radio" name="trustInPayout" value="2"><span>2</span></label>
                            <label><input type="radio" name="trustInPayout" value="3"><span>3</span></label>
                            <label><input type="radio" name="trustInPayout" value="4"><span>4</span></label>
                            <label><input type="radio" name="trustInPayout" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Don't trust at all</span>
                            <span>Trust completely</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>7. How valuable was getting insurance AND farming inputs together in one package?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="bundleValuePerception" value="1" required><span>1</span></label>
                            <label><input type="radio" name="bundleValuePerception" value="2"><span>2</span></label>
                            <label><input type="radio" name="bundleValuePerception" value="3"><span>3</span></label>
                            <label><input type="radio" name="bundleValuePerception" value="4"><span>4</span></label>
                            <label><input type="radio" name="bundleValuePerception" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Not valuable at all</span>
                            <span>Extremely valuable</span>
                        </div>
                    </div>

                    <div class="question-item">
                        <p><strong>8. If this bundle was available next season, how likely would you be to use it?</strong></p>
                        <div class="likert-scale">
                            <label><input type="radio" name="futureUseLikelihood" value="1" required><span>1</span></label>
                            <label><input type="radio" name="futureUseLikelihood" value="2"><span>2</span></label>
                            <label><input type="radio" name="futureUseLikelihood" value="3"><span>3</span></label>
                            <label><input type="radio" name="futureUseLikelihood" value="4"><span>4</span></label>
                            <label><input type="radio" name="futureUseLikelihood" value="5"><span>5</span></label>
                        </div>
                        <div class="scale-labels">
                            <span>Definitely not</span>
                            <span>Definitely yes</span>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary btn-large" style="margin-top: 30px;">
                        <i class="fas fa-check"></i>
                        <span>Submit Assessment</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="results-container">
                <div class="celebration-animation">
                    <i class="fas fa-trophy"></i>
                </div>
                <h2 data-translate="results.title">Game Completed!</h2>
                <p data-translate="results.subtitle">Here's how you performed</p>

                <div class="results-grid">
                    <div class="result-card">
                        <i class="fas fa-coins"></i>
                        <h4 data-translate="results.totalEarnings">Total Earnings</h4>
                        <div class="result-value" id="totalEarnings">0 GHS</div>
                    </div>
                    <div class="result-card">
                        <i class="fas fa-shield-alt"></i>
                        <h4 data-translate="results.insuranceSpent">Insurance Spent</h4>
                        <div class="result-value" id="totalInsurance">0 GHS</div>
                    </div>
                    <div class="result-card">
                        <i class="fas fa-hand-holding-usd"></i>
                        <h4 data-translate="results.payoutsReceived">Payouts Received</h4>
                        <div class="result-value" id="totalPayouts">0 GHS</div>
                    </div>
                    <div class="result-card">
                        <i class="fas fa-brain"></i>
                        <h4 data-translate="results.knowledgeScore">Knowledge Score</h4>
                        <div class="result-value" id="knowledgeScore">0/5</div>
                    </div>
                </div>

                <div class="insights-panel">
                    <h3 data-translate="results.insights">Key Insights</h3>
                    <div id="insightsContent"></div>
                </div>

                <button class="btn-primary btn-large" id="restartBtn">
                    <i class="fas fa-redo"></i>
                    <span data-translate="results.playAgain">Play Again</span>
                </button>
            </div>
        </div>

        <!-- Second Partner Prompt Screen -->
        <div id="secondPartnerScreen" class="screen">
            <div class="form-container" style="max-width: 800px; text-align: center;">
                <div class="prompt-message">
                    <!-- Content populated by JavaScript -->
                </div>
                
                <button class="btn-primary btn-large" id="startSecondPartnerBtn" style="margin-top: 30px;">
                    <i class="fas fa-user-plus"></i>
                    <span>Start Second Partner Session</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Couple Prompt Screen -->
        <div id="coupleScreen" class="screen">
            <div class="form-container" style="max-width: 800px; text-align: center;">
                <div class="prompt-message">
                    <!-- Content populated by JavaScript -->
                </div>
                
                <button class="btn-primary btn-large" id="startCouplePromptBtn" style="margin-top: 30px; background: linear-gradient(135deg, var(--ghana-yellow), var(--ghana-gold)); color: var(--ghana-green-dark);">
                    <i class="fas fa-heart"></i>
                    <span>Continue to Couple Play</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Couple Pre-Questions Screen -->
        <div id="couplePreQuestionsScreen" class="screen">
            <div class="form-container" style="max-width: 700px;">
                <div class="progress-header">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%; background: linear-gradient(90deg, var(--ghana-red), var(--ghana-yellow), var(--ghana-green));"></div>
                    </div>
                    <span class="progress-text">Couple Information</span>
                </div>

                <h2 style="text-align: center; color: var(--primary);">
                    <i class="fas fa-heart"></i> About Your Marriage
                </h2>
                <p class="subtitle" style="text-align: center;">
                    Before you begin playing together, please answer these questions
                </p>
                
                <form id="couplePreQuestionsForm" class="game-form">
                    <div class="form-group">
                        <label style="font-size: 18px;">
                            <i class="fas fa-ring" style="color: var(--ghana-gold); margin-right: 10px;"></i>
                            How long have you been married?
                        </label>
                        <select name="marriageDuration" required style="font-size: 18px; padding: 16px;">
                            <option value="">Select duration...</option>
                            <option value="1">Less than 1 year</option>
                            <option value="2">1-2 years</option>
                            <option value="3">3-5 years</option>
                            <option value="4">6-10 years</option>
                            <option value="5">11-15 years</option>
                            <option value="6">16-20 years</option>
                            <option value="7">More than 20 years</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label style="font-size: 18px;">
                            <i class="fas fa-baby" style="color: var(--ghana-gold); margin-right: 10px;"></i>
                            How many children do you have?
                        </label>
                        <input type="number" name="numberOfChildren" required min="0" max="20" 
                               placeholder="Enter number of children" 
                               style="font-size: 18px; padding: 16px;">
                    </div>

                    <div style="background: #E3F2FD; padding: 25px; border-radius: 16px; margin: 30px 0; border-left: 6px solid #1976D2;">
                        <p style="margin: 0; font-size: 17px; line-height: 1.8;">
                            <i class="fas fa-info-circle" style="color: #1976D2; margin-right: 10px; font-size: 24px; vertical-align: middle;"></i>
                            <strong>Remember:</strong> You will now make decisions together. Discuss each choice and reach agreement before proceeding.
                        </p>
                    </div>

                    <button type="submit" class="btn-primary btn-large" style="margin-top: 20px;">
                        <i class="fas fa-play"></i>
                        <span>Start Couple Session</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>
        </div>

    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p data-translate="common.loading">Loading...</p>
    </div>

    <!-- Floating Particles Script -->
    <script>
        // Generate floating particles for welcome screen
        const particles = document.getElementById('particles');
        if (particles) {
            const icons = ['üå±', 'üåæ', '‚òÄÔ∏è', 'üåßÔ∏è', 'üí∞', 'üìö'];
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.textContent = icons[Math.floor(Math.random() * icons.length)];
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (10 + Math.random() * 10) + 's';
                particles.appendChild(particle);
            }
        }
    </script>

    <!-- Load tutorial content BEFORE game.js -->
   <!-- Load scripts in correct order -->
    <script src="js/offline-storage.js"></script>
    <script src="js/tutorial-content.js"></script>
    <script src="js/game.js"></script>
    
    <!-- üÜï ADD THIS: Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('‚úÖ Service Worker registered successfully:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log('üîÑ New version available! Refresh to update.');
                                    
                                    // Optional: Show update notification to user
                                    if (confirm('A new version is available! Reload to update?')) {
                                        newWorker.postMessage({ type: 'SKIP_WAITING' });
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('‚ùå Service Worker registration failed:', error);
                    });
            });
            
            // Reload page when new service worker takes control
            navigator.serviceWorker.addEventListener('controllerchange', () => {
                console.log('üîÑ New Service Worker activated - Reloading...');
                window.location.reload();
            });
        } else {
            console.warn('‚ö†Ô∏è Service Workers not supported in this browser');
        }




        // Force scroll to top on any screen change
        window.addEventListener('load', function() {
            window.scrollTo(0, 0);
        });
        
        // Reset scroll whenever DOM changes
        const observer = new MutationObserver(function() {
            if (document.querySelector('.screen.active')) {
                window.scrollTo(0, 0);
                document.documentElement.scrollTop = 0;
                document.body.scrollTop = 0;
            }
        });
        
        observer.observe(document.body, {
            attributes: true,
            subtree: true,
            attributeFilter: ['class']
        });




    </script>





</body>
</html>